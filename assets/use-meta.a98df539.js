import{c as E,h as C}from"./dom.6d71efdf.js";import{c as d,h as T,a as m,g as P,l as j,j as x,w,V as F,W as q,b as H}from"./index.87720ffc.js";var D=E({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:n}){const{proxy:{$q:e}}=P(),r=m(j);m(x,()=>{console.error("QPage needs to be child of QPageContainer")});const o=d(()=>{const i=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof t.styleFn=="function"){const c=r.isContainer.value===!0?r.containerHeight.value:e.screen.height;return t.styleFn(i,c)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-i+"px":e.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":e.screen.height-i+"px"}}),a=d(()=>`q-page ${t.padding===!0?" q-layout-padding":""}`);return()=>T("main",{class:a.value,style:o.value},C(n.default))}});const L=Object.prototype.toString,h=Object.prototype.hasOwnProperty,k={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(t=>{k["[object "+t+"]"]=t.toLowerCase()});function u(t){return t===null?String(t):k[L.call(t)]||"object"}function y(t){if(!t||u(t)!=="object"||t.constructor&&!h.call(t,"constructor")&&!h.call(t.constructor.prototype,"isPrototypeOf"))return!1;let n;for(n in t);return n===void 0||h.call(t,n)}function O(){let t,n,e,r,o,a,i=arguments[0]||{},c=1,f=!1;const p=arguments.length;for(typeof i=="boolean"&&(f=i,i=arguments[1]||{},c=2),Object(i)!==i&&u(i)!=="function"&&(i={}),p===c&&(i=this,c--);c<p;c++)if((t=arguments[c])!==null)for(n in t)e=i[n],r=t[n],i!==r&&(f&&r&&(y(r)||(o=u(r)==="array"))?(o?(o=!1,a=e&&u(e)==="array"?e:[]):a=e&&y(e)?e:{},i[n]=O(f,a,r)):r!==void 0&&(i[n]=r));return i}let g,v;const s=[];function M(t){t.title&&(t.title=t.titleTemplate?t.titleTemplate(t.title):t.title,delete t.titleTemplate),[["meta","content"],["link","href"]].forEach(n=>{const e=t[n[0]],r=n[1];for(const o in e){const a=e[o];a.template&&(Object.keys(a).length===1?delete e[o]:(a[r]=a.template(a[r]||""),delete a.template))}})}function S(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!0;for(const e in t)if(t[e]!==n[e])return!0}function b(t){return["class","style"].includes(t)===!1}function A(t){return["lang","dir"].includes(t)===!1}function $(t,n){const e={},r={};return t===void 0?{add:n,remove:r}:(t.title!==n.title&&(e.title=n.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(o=>{const a=t[o],i=n[o];if(r[o]=[],a==null){e[o]=i;return}e[o]={};for(const c in a)i.hasOwnProperty(c)===!1&&r[o].push(c);for(const c in i)a.hasOwnProperty(c)===!1?e[o][c]=i[c]:S(a[c],i[c])===!0&&(r[o].push(c),e[o][c]=i[c])}),{add:e,remove:r})}function Q({add:t,remove:n}){t.title&&(document.title=t.title),Object.keys(n).length>0&&(["meta","link","script"].forEach(e=>{n[e].forEach(r=>{document.head.querySelector(`${e}[data-qmeta="${r}"]`).remove()})}),n.htmlAttr.filter(A).forEach(e=>{document.documentElement.removeAttribute(e)}),n.bodyAttr.filter(b).forEach(e=>{document.body.removeAttribute(e)})),["meta","link","script"].forEach(e=>{const r=t[e];for(const o in r){const a=document.createElement(e);for(const i in r[o])i!=="innerHTML"&&a.setAttribute(i,r[o][i]);a.setAttribute("data-qmeta",o),e==="script"&&(a.innerHTML=r[o].innerHTML||""),document.head.appendChild(a)}}),Object.keys(t.htmlAttr).filter(A).forEach(e=>{document.documentElement.setAttribute(e,t.htmlAttr[e]||"")}),Object.keys(t.bodyAttr).filter(b).forEach(e=>{document.body.setAttribute(e,t.bodyAttr[e]||"")})}function z(){const t={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let n=0;n<s.length;n++){const{active:e,val:r}=s[n];e===!0&&O(!0,t,r)}M(t),Q($(v,t)),v=t}function l(){clearTimeout(g),g=setTimeout(z,50)}function K(t){{const n={active:!0};if(typeof t=="function"){const e=d(t);n.val=e.value,w(e,r=>{n.val=r,n.active===!0&&l()})}else n.val=t;s.push(n),l(),F(()=>{n.active=!0,l()}),q(()=>{n.active=!1,l()}),H(()=>{s.splice(s.indexOf(n),1),l()})}}export{D as Q,K as u};
